<aura:component description="ZK_OrderReviewCartProduct">

    <aura:attribute name="product" type="Object" required="true"/>
    <aura:attribute name="originalProduct" type="Object"/>

    <aura:attribute name="readOnly" type="Boolean" default="false"/>

    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>

    <aura:registerEvent name="ZK_OrderProductModified" type="c:ZK_OrderProductModified"/>

    <div class="slds-grid slds-grid_vertical-align-center">
        <div style="{!'background-image: url(\'' + v.product.Image + '\''}"
             class="product-image">
        </div>

        <div class="slds-size_1-of-3 slds-m-left_small">
            <a data-value="{!v.product.Id}" >
                <h3 class="slds-text-heading_small">{!v.product.Name}</h3>
            </a>
        </div>

        <aura:if isTrue="{!not(v.readOnly)}">
            <div class="slds-grid slds-grid_vertical-align-center slds-m-left_x-large">

                <p class="quantity-button cursor-pointer" onclick="{!c.onProductAdded}">+</p>
                <p class="slds-text-heading_small slds-m-horizontal_small"> x{!v.product.Amount} </p>
                <p class="quantity-button cursor-pointer" onclick="{!c.onProductTaken}">-</p>

                <lightning:buttonIcon iconName="utility:undo"
                                      class="slds-m-left_medium slds-p-around_medium"
                                      variant="brand"
                                      size="small"
                                      onclick="{!c.onUndo}"
                                      alternativeText="Undo"/>

            </div>
        </aura:if>
        <aura:if isTrue="{!v.readOnly}">
            <div class="slds-grid slds-grid_vertical-align-center slds-m-left_x-large">
                <p class="slds-text-heading_small slds-m-horizontal_small"> x{!v.product.Amount} </p>
            </div>
        </aura:if>

        <div class="slds-col_bump-left slds-grid_vertical slds-text-heading_small">
            <div style="{!v.product.UnitPriceDiscount != null ? 'text-decoration: line-through' : ''}">
                <lightning:formattedNumber value="{!v.product.Amount * v.product.UnitPrice}"
                                           style="currency"/>
            </div>

            <aura:if isTrue="{!v.product.UnitPriceDiscount != null}">
                <div style="color: #29a329;font-weight: bold">
                    <lightning:formattedNumber value="{!v.product.Amount * v.product.UnitPriceDiscount}"
                                               style="currency"/>
                </div>
            </aura:if>
        </div>

    </div>

</aura:component>
